webpackJsonp([1],{Jmt5:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},i,!1,function(t){a("s347")},null,null).exports,n=a("/ocq"),r=a("bOdI"),l=a.n(r),d=a("mvHQ"),c=a.n(d),g=(a("Qbok"),{name:"history",data:function(){return{history:[],save_days:5}},mounted:function(){this.parseHistory()},methods:{parseOneDay:function(t,e){var a=window.localStorage.getItem(t+"-todo"),o=window.localStorage.getItem(t+"-doing"),i=window.localStorage.getItem(t+"-ok");if(a||o||i){var s={};s.key=t.replace(".","月"),s.id=e,a&&(s.todo=JSON.parse(a)),o&&(s.doing=JSON.parse(o)),i&&(s.ok=JSON.parse(i)),this.history.push(s)}},parseHistory:function(){for(var t=[this.dayjs().format("MM.DD")],e=1;e<this.save_days;e++){var a=this.dayjs().subtract(e,"day").format("MM.DD");this.parseOneDay(a,"t"+e),t.push(a)}this.clearMoreDay(t)},clearMoreDay:function(t){for(var e=void 0,a=void 0,o=0;o<window.localStorage.length;o++)a=(e=window.localStorage.key(o)).split("-")[0],t.indexOf(a)<0&&window.localStorage.removeItem(e)},fakeData:function(){var t=["吃饭","睡觉","看电视","打酱油"],e=this.dayjs().subtract(1,"day").format("MM.DD"),a=this.dayjs().subtract(2,"day").format("MM.DD"),o=this.dayjs().subtract(3,"day").format("MM.DD"),i=this.dayjs().subtract(4,"day").format("MM.DD");window.localStorage.setItem(e+"-todo",t),window.localStorage.setItem(e+"-doing",t),window.localStorage.setItem(e+"-ok",t),window.localStorage.setItem(a+"-todo",t),window.localStorage.setItem(a+"-doing",t),window.localStorage.setItem(a+"-ok",t),window.localStorage.setItem(o+"-todo",t),window.localStorage.setItem(o+"-doing",t),window.localStorage.setItem(o+"-ok",t),window.localStorage.setItem(i+"-todo",t),window.localStorage.setItem(i+"-ok",t)}}}),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accordion",attrs:{id:"accordionExample"}},t._l(t.history,function(e){return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[a("button",{staticClass:"btn",staticStyle:{"background-color":"rgba(0,0,0,.3)"},attrs:{type:"button","data-toggle":"collapse","data-target":"#"+e.id,"aria-expanded":"false","aria-controls":e.id}},[a("h5",{staticClass:"mb-0"},[t._v("\n          "+t._s(e.key)+"日の任务池\n          ")])])]),t._v(" "),a("div",{staticClass:"collapse",attrs:{id:e.id,"aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[a("div",{staticClass:"card-body row"},[a("fieldset",{staticClass:"t-card col-sm-4"},[a("legend",{staticClass:"t-legend t-text-gray"},[t._v("待办")]),t._v(" "),a("ul",{staticClass:"list-group "},t._l(e.todo,function(e){return a("li",{staticClass:"list-group-item"},[t._v(t._s(e))])}))]),t._v(" "),a("fieldset",{staticClass:"t-card col-sm-4"},[a("legend",{staticClass:"t-legend t-text-gray"},[t._v("正在做")]),t._v(" "),a("ul",{staticClass:"list-group "},t._l(e.doing,function(e){return a("li",{staticClass:"list-group-item"},[t._v(t._s(e))])}))]),t._v(" "),a("fieldset",{staticClass:"t-card col-sm-4"},[a("legend",{staticClass:"t-legend t-text-gray"},[t._v("已完成")]),t._v(" "),a("ul",{staticClass:"list-group "},t._l(e.ok,function(e){return a("li",{staticClass:"list-group-item"},[t._v(t._s(e))])}))])])])])}))},staticRenderFns:[]};var u,v=a("VU/8")(g,m,!1,function(t){a("NSnv")},"data-v-eb905ec6",null).exports,p=(u={name:"Index",components:{History:v},data:function(){return{todoitem:[],doingitem:[],okitem:[],dragnow:[],dragenternow:"",fieldActive:!1,fieldActiveId:"",newItem:""}}},l()(u,"components",{History:v}),l()(u,"mounted",function(){this.parseLastDay(),this.parseToday()}),l()(u,"methods",{removeItem:function(t,e){for(var a=0;a<t.length;a++)if(t[a].trim()==e)return void t.splice(a,1)},parseLastDay:function(){var t=this.dayjs().subtract(1,"day").format("MM.DD");if(console.log("day_last",t),!window.localStorage.getItem(t+"-parse")){var e=window.localStorage.getItem(t+"-todo"),a=window.localStorage.getItem(t+"-doing"),o=[];e&&(e=JSON.parse(e),o=o.concat(e)),a&&(a=JSON.parse(a),o=o.concat(a)),this.todoitem=this.todoitem.concat(o),window.localStorage.setItem(t+"-parse","true")}},parseToday:function(){var t=this.dayjs().format("MM.DD"),e=t+"-todo",a=t+"-doing",o=t+"-ok",i=window.localStorage.getItem(e),s=window.localStorage.getItem(a),n=window.localStorage.getItem(o);console.log(i),console.log(JSON.parse(i)),i&&(this.todoitem=this.todoitem.concat(JSON.parse(i))),s&&(this.doingitem=this.doingitem.concat(JSON.parse(s))),n&&(this.okitem=this.okitem.concat(JSON.parse(n)))},dragStart:function(t){t.dataTransfer.setData("item",t.target.innerText),t.target.style.opacity=1,t.target.style.boxShadow="0 2px 2px 0 rgba(47, 222, 50, .14), 0 3px 1px -2px rgba(47, 222, 50, .2), 0 1px 5px 0 rgba(47, 222, 50, .12)",this.dragnow=t.target.parentNode.parentNode.id,console.log("drag now is",this.dragnow),this.fieldActive=!0},dragEnter:function(t){t.preventDefault(),t.target.id&&(this.dragenternow=t.target.id,this.fieldActiveId=t.target.id),console.log("enter now",this.dragenternow)},dragOver:function(t){t.preventDefault()},dragLeave:function(t){t.preventDefault()},dragDrop:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.getData("item");e&&""!=this.dragenternow&&this.dragnow!=this.dragenternow&&(console.log(this.dragnow,"remove",e),this.removeItem(this[this.dragnow],e.trim()),this[this.dragenternow].push(e))},dragEnd:function(t){t.target.style.boxShadow="",this.dragenternow="",this.dragnow="",this.fieldActive=!1,this.fieldActiveId=""},addNewItem:function(){this.newItem&&(this.todoitem.push(this.newItem),this.newItem="")},addLocal:function(t,e){var a=this.dayjs().format("MM.DD")+"-"+t;console.log("add local"),window.localStorage.setItem(a,c()(e))},removeSelectItem:function(t,e){confirm("确认删除: "+this[t][e])&&this[t].splice(e,1)},upItem:function(t,e){if(0==e)return!0;if(e>=this[t].length)return!0;console.log(e);var a=e-1,o=this[t][a];this[t].splice(a,1,this[t][e]),this[t].splice(e,1,o)},exportTask:function(){for(var t="",e=void 0,a=0;a<window.localStorage.length;a++)t+=(e=window.localStorage.key(a))+"//"+window.localStorage.getItem(e)+"\n";var o=new Blob([t]),i=document.createElement("a");i.download="exportTask.txt",i.style.display="none",i.href=URL.createObjectURL(o),document.body.appendChild(i),i.click(),document.body.removeChild(i)},importTask:function(){var t=document.getElementById("upload-file"),e=t.value;if(e){console.log(e);var a=t.files[0],o=new FileReader;o.onload=function(t){for(var e=t.target.result.split("\n"),a=0;a<e.length;a++){var o=e[a].split("//");if(2==o.length){var i=window.localStorage.getItem(o[0]);console.log(o[1]),i&&!o[0].endsWith("parse")?(i=(i=JSON.parse(i)).concat(JSON.parse(o[1])),window.localStorage.setItem(o[0],c()(i))):window.localStorage.setItem(o[0],o[1])}}window.location.reload()},o.readAsText(a)}},itemAddLevel:function(){return console.log("hello right"),!1}}),l()(u,"watch",{todoitem:function(){this.addLocal("todo",this.todoitem)},doingitem:function(){this.addLocal("doing",this.doingitem)},okitem:function(){this.addLocal("ok",this.okitem)}}),u),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[a("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("TaskPool")]),t._v(" "),a("ul",{staticClass:"navbar-nav "},[a("li",{staticClass:"nav-item"},[a("span",{staticClass:"nav-link",on:{click:t.exportTask}},[t._v("导出")])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("span",{staticClass:"nav-link import-task"},[t._v("导入"),a("input",{staticClass:"import-input",attrs:{type:"file",id:"upload-file"},on:{change:t.importTask}})])])])]),t._v(" "),a("div",{staticClass:"row input-area"},[a("div",{staticClass:"col-sm-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem,expression:"newItem"}],staticClass:"form-control add-input",attrs:{type:"text"},domProps:{value:t.newItem},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addNewItem(e):null},input:function(e){e.target.composing||(t.newItem=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:t.addNewItem}},[t._v("add")])])]),t._v(" "),a("div",{staticClass:"row"},[a("fieldset",{staticClass:"t-card col-sm-4",class:{field:t.fieldActive,"field-active":"todoitem"==t.fieldActiveId},attrs:{id:"todoitem"},on:{drop:t.dragDrop,dragover:t.dragOver,dragenter:t.dragEnter,dragleave:t.dragLeave}},[a("legend",{staticClass:"t-legend text-danger"},[t._v("待办")]),t._v(" "),a("ul",{staticClass:"list-group"},[a("i",{staticClass:"right-arrow"}),t._v(" "),t._l(t.todoitem,function(e,o){return a("li",{staticClass:"list-group-item",class:{"item-loss":t.fieldActive},attrs:{draggable:"true"},on:{dragstart:t.dragStart,dragend:t.dragEnd,click:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:t.itemAddLevel(e):null}}},[t._v(t._s(e)+"\n          "),a("i",{staticClass:"up-item",on:{click:function(e){t.upItem("todoitem",o)}}}),t._v(" "),a("i",{staticClass:"kill-item",on:{click:function(e){t.removeSelectItem("todoitem",o)}}})])})],2)]),t._v(" "),a("fieldset",{staticClass:"t-card col-sm-4",class:{field:t.fieldActive,"field-active":"doingitem"==t.fieldActiveId},attrs:{id:"doingitem"},on:{drop:t.dragDrop,dragover:t.dragOver,dragenter:t.dragEnter,dragleave:t.dragLeave}},[a("legend",{staticClass:"t-legend text-primary"},[t._v("正在做")]),t._v(" "),a("ul",{staticClass:"list-group"},[a("i",{staticClass:"right-arrow"}),t._v(" "),t._l(t.doingitem,function(e,o){return a("li",{staticClass:"list-group-item",class:{"item-loss":t.fieldActive},attrs:{draggable:"true"},on:{dragstart:t.dragStart,dragend:t.dragEnd}},[t._v(t._s(e)+"\n          "),a("i",{staticClass:"up-item",on:{click:function(e){t.upItem("doingitem",o)}}}),t._v(" "),a("i",{staticClass:"kill-item",on:{click:function(e){t.removeSelectItem("doingitem",o)}}})])})],2)]),t._v(" "),a("fieldset",{staticClass:" t-card col-sm-4",class:{field:t.fieldActive,"field-active":"okitem"==t.fieldActiveId},attrs:{id:"okitem"},on:{drop:t.dragDrop,dragover:t.dragOver,dragenter:t.dragEnter,dragleave:t.dragLeave}},[a("legend",{staticClass:"t-legend text-success"},[t._v("已完成")]),t._v(" "),a("ul",{staticClass:"list-group"},t._l(t.okitem,function(e,o){return a("li",{staticClass:"list-group-item",class:{"item-loss":t.fieldActive},attrs:{draggable:"true"},on:{dragstart:t.dragStart,dragend:t.dragEnd}},[t._v(t._s(e)+"\n          "),a("i",{staticClass:"up-item",on:{click:function(e){t.upItem("okitem",o)}}}),t._v(" "),a("i",{staticClass:"kill-item",on:{click:function(e){t.removeSelectItem("okitem",o)}}})])}))])]),t._v(" "),a("history")],1)},staticRenderFns:[]};var w=a("VU/8")(p,f,!1,function(t){a("Rg33")},"data-v-157f2e50",null).exports;o.a.use(n.a);var h=new n.a({mode:"history",routes:[{path:"/",name:"Index",component:w}]}),y=(a("7t+N"),a("oqQY")),_=a.n(y);a("K3J8"),a("Jmt5");o.a.config.productionTip=!1,o.a.prototype.dayjs=_.a,o.a.use(_.a),new o.a({el:"#app",router:h,components:{App:s},template:"<App/>"})},NSnv:function(t,e){},Qbok:function(t,e){},Rg33:function(t,e){},s347:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6bc9c35a569a8d3807c1.js.map